---
myst:
  html_meta:
    "description": Architected Queuing Language Profiling Library is an open source library that enables advanced GPU profiling and tracing on AMD platforms
    "keywords": AQLprofile, ROCm, tool, Instinct, accelerator, AMD
---

# What is AQLprofile?

The Architected Queuing Language Profiling Library (AQLProfile) is an open source library that enables advanced GPU profiling and tracing on AMD platforms. It works in conjunction with [`rocprofiler-sdk`](https://github.com/ROCm/rocprofiler-sdk) to support profiling methods such as [performance counters (PMC)](examples/pmc-workflow.rst) and [SQ thread trace (SQTT)](examples/sqtt-workflow.rst). AQLprofile provides the foundational mechanisms for constructing AQL packets and managing profiling operations across multiple AMD GPU architecture families. The development of AQLprofile is aligned with `rocprofiler-sdk`, ensuring compatibility and feature support for new GPU architectures and profiling requirements.

AQLprofile builds on concepts from the Heterogeneous System Architecture (HSA) and the AQL, which define the foundations for GPU command processing and profiling on AMD platforms. For further reading, see:

- [HSA Platform System Architecture Specification](http://hsafoundation.com/wp-content/uploads/2021/02/HSA-SysArch-1.2.pdf)
- [HSA Runtime Programmer’s Reference Specification](http://hsafoundation.com/wp-content/uploads/2021/02/HSA-Runtime-1.2.pdf)

## Features

- Profiling AQL packets for GPU workloads.
- Performance counters and SQ thread traces.
- Support for GFX9, GFX10, GFX11, and GFX12 architecture families.
- Verbose tracing and error logging capabilities.
- Thread trace binary data generated by AQLprofile can be decoded using [`rocprof-trace-decoder`](https://github.com/ROCm/rocprof-trace-decoder/releases).

## Who Should use this library?

- **End users**: If you want to profile AMD GPUs, use [`rocprofiler-sdk`](https://github.com/ROCm/rocprofiler-sdk) or tools that depend on it. You do *not* need to use AQLprofile directly.
- **Developers/integrators**: If you're building profiling tools, custom workflows, or need to extend profiling capabilities, you may use AQLprofile directly as a backend.

## How does AQLprofile fit into the ROCm profiling stack?

Here's the typical workflow:

**Application** → **rocprofiler-sdk** → **AQLprofile** → **AMD GPU hardware**

- AQLprofile provides the mechanisms for constructing profiling commands, managing command buffers, and interacting with hardware counters.
- The `rocprofiler-sdk` provides a higher-level API and user-facing tools, using AQLprofile internally.

## Supported architectures and Counter Blocks

The AQLprofile library supports profiling and tracing GPU workloads across multiple architectures. Here's a summary of the counter blocks supported for each architecture:

| Counter Block Name      | GFX9        | GFX908         | GFX90A         | GFX942         | GFX10       | GFX11        | GFX12      |
|-------------------------|-------------|----------------|----------------|----------------|-------------|------------- |------------|
| ATC                     | ✅          | ❌            | ❌             | ✅            | ❌          | ❌          | ❌         |
| ATC_L2                  | ✅          | ❌            | ❌             | ❌            | ❌          | ❌          | ❌         |
| CHA                     | ❌          | ❌            | ❌             | ❌            | ❌          | ❌          | ✅         |
| CHC                     | ❌          | ❌            | ❌             | ❌            | ❌          | ❌          | ✅         |
| CPC                     | ✅          | ✅            | ✅             | ✅            | ✅          | ✅          | ✅         |
| CPF                     | ✅          | ✅            | ✅             | ✅            | ✅          | ✅          | ✅         |
| CPG                     | ❌          | ❌            | ❌             | ❌            | ❌          | ❌          | ✅         |
| GCEA                    | ✅          | ✅            | ✅             | ✅            | ✅          | ✅          | ✅         |
| GCR                     | ❌          | ❌            | ❌             | ❌            | ✅          | ✅          | ✅         |
| GDS                     | ✅          | ❌            | ❌             | ❌            | ✅          | ✅          | ❌         |
| GL1A                    | ❌          | ❌            | ❌             | ❌            | ✅          | ✅          | ✅         |
| GL1C                    | ❌          | ❌            | ❌             | ❌            | ✅          | ✅          | ✅         |
| GL2A                    | ❌          | ❌            | ❌             | ❌            | ✅          | ✅          | ✅         |
| GL2C                    | ❌          | ❌            | ❌             | ❌            | ✅          | ✅          | ✅         |
| GRBM                    | ✅          | ✅            | ✅             | ✅            | ✅          | ✅          | ✅         |
| GRBMH                   | ❌          | ❌            | ❌             | ❌            | ❌          | ❌          | ✅         |
| GRBM_SE                 | ✅          | ❌            | ❌             | ❌            | ❌          | ❌          | ❌         |
| GUS                     | ❌          | ❌            | ❌             | ❌            | ✅          | ✅          | ❌         |
| MC_VM_L2                | ✅          | ❌            | ❌             | ❌            | ❌          | ❌          | ❌         |
| RPB                     | ✅          | ✅            | ❌             | ❌            | ❌          | ❌          | ❌         |
| SDMA                    | ❌          | ❌            | ❌             | ❌            | ❌          | ❌          | ❌         |
| SPI                     | ✅          | ✅            | ✅             | ✅            | ✅          | ✅          | ✅         |
| SQ                      | ✅          | ✅            | ✅             | ✅            | ✅          | ✅          | ✅         |
| SQ_CS                   | ✅          | ❌            | ❌             | ❌            | ❌          | ❌          | ❌         |
| SX                      | ✅          | ❌            | ❌             | ❌            | ✅          | ✅          | ❌         |
| TA                      | ✅          | ✅            | ✅             | ✅            | ✅          | ✅          | ✅         |
| TCA                     | ✅          | ✅            | ✅             | ✅            | ❌          | ❌          | ❌         |
| TCC                     | ✅          | ✅            | ✅             | ✅            | ❌          | ❌          | ❌         |
| TCP                     | ✅          | ✅            | ✅             | ✅            | ❌          | ✅          | ✅         |
| TD                      | ✅          | ✅            | ✅             | ✅            | ❌          | ❌          | ✅         |

Refer to the SDK documentation for the most up-to-date list of supported architectures.